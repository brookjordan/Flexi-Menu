{"version":3,"file":"all.min.js","sources":["../src/js_concat/MU_system.js","../src/js_concat/my_app.js"],"names":["MU_System","angular","module","factory","$rootScope","addMenu","menuID","options","o","visible","state","sizeOpen","sizeClosed","menus","items","children","styles","open","closed","order","push","setAllOrders","$broadcast","muSystem","setOrder","oldOrder","copy","thisMenu","orderOf","newOrder","i","indexOf","reorderMenus","requestedOrder","ro","item","split","length","toggleVisibility","to","handleLinks","isVisible","toggleState","newState","stateOf","isOfState","linkMenus","which","how","linksMenus","links","handleLink","unlinkMenus","thisLink","linkAIndex","linkBIndex","menuIDs","splice","thisMenuLinkIndex","otherMenuLinkIndex","othermenuID","A","B","handleLink_oneOpen","handleLink_oneClosed","handleLink_oneVisible","handleLink_oneHidden","add","link","unlink","reorder","is","menusBase","$window","$timeout","muMenus","setSystemMetrics","offsetLeft","getSize","offsetRight","offsetTop","offsetBottom","muContent","containerWidth","systemMetrics","top","right","bottom","left","size","resizeHandler","oldContainerClass","timeNow","Date","lastResize","mediaClass","findContentSize","delayBroadcastResize","cancel","MUContiner","document","getElementById","parentNode","getBoundingClientRect","containerHeight","contentWidth","contentHeight","setContextQueryString","addQuery","type","j","arg","queries","args","arguments","contextQueries","sort","sortNumber","query","greaterThan","w","a","b","h","element","bind","$on","metrics","myApp","controller","this","games","id","bg","Math","floor","random","getHeroHeight","height","title","$scope","self","openItem","toggle","$index","event","capitalise","string","substr","toUpperCase","getClassName","menu","menu2","className","prompt","content","leftIcons","rightIcons","leftOpen","rightOpen","selectLeft","selectRight","$apply"],"mappings":"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","sourcesContent":["var MU_System = angular.module('MU', []);\n;MU_System.factory('muMenus', [ '$rootScope', '$timeout',\n\tfunction( $rootScope, $timeout ) {\n\n\n\t/*\n\t *\tAdd a new menu\n\t */\n\tfunction addMenu ( menuID, options ) {\n\t\tvar o = options || {},\n\n\t\t\tvisible = typeof o.visible === 'boolean' ?\n\t\t\t\to.visible :\n\t\t\t\ttrue,\n\t\t\tstate = o.state || 'open',\n\n\t\t\t//\tTODO: Remove when muContent has a better way of getting sizes\n\t\t\tsizeOpen = o.sizeOpen || 50,\n\t\t\tsizeClosed = o.sizeClosed || 10;\n\t\t\t//\tENDTODO: Remove when muContent has a better way of getting sizes\n\n\n\t\tmenus.items[ menuID ] = {\n\t\t\tvisible: visible,\n\t\t\tstate: state,\n\t\t\tchildren: {},\n\n\t\t\t//\tTODO: Remove when muContent has a better way of getting sizes\n\t\t\tstyles: {\n\t\t\t\topen: sizeOpen,\n\t\t\t\tclosed: sizeClosed\n\t\t\t}\n\t\t\t//\tENDTODO: Remove when muContent has a better way of getting sizes\n\t\t};\n\t\tmenus.order.push( menuID );\n\n\n\t\tsetAllOrders();\n\n\t\t$rootScope.$broadcast( 'MU_menuAdded', { menuID: menuID } );\n\n\n\t\treturn muSystem;\n\t}\n\n\n\n\n\n\t/*\n\t *\tMenu ordering\n\t */\n\tfunction setOrder ( menuID ) {\n\t\tvar oldOrder\t= angular.copy( menus.order ),\n\t\t\tthisMenu    = menus.items[ menuID ],\n\t\t\torder       = orderOf( menuID );\n\n\t\tthisMenu.order = order;\n\n\t\t$rootScope.$broadcast( 'MU_menuReordered', { menuID: menuID, oldOrder: oldOrder, newOrder: menus.order } );\n\n\t\treturn muSystem;\n\t}\n\n\tfunction setAllOrders () {\n\t\tvar i;\n\n\t\tfor ( i in menus.items ) {\n\t\t\tsetOrder( i );\n\t\t}\n\n\t\treturn muSystem;\n\t}\n\n\tfunction orderOf ( menuID ) {\n\t\tvar order = 4 - menus.order.indexOf( menuID );\n\n\t\treturn order;\n\t}\n\n\tfunction reorderMenus ( requestedOrder ) {\n\t\tvar ro,\n\t\t\tnewOrder = [],\n\n\t\t\titem,\n\t\t\ti = 0;\n\n\t\tif ( typeof requestedOrder === 'undefined' ) {\n\t\t\tro = [];\n\t\t} else if ( typeof requestedOrder === 'string' ) {\n\t\t\tro = requestedOrder.split(' ');\n\t\t} else {\n\t\t\tro = requestedOrder;\n\t\t}\n\n\t\tfor (; i < ro.length; i+=1 ) {\n\t\t\titem = ro[i];\n\n\t\t\tif ( menus.order.indexOf( item ) > -1 ) {\n\t\t\t\tnewOrder.push( item );\n\t\t\t}\n\t\t}\n\n\t\tif ( newOrder.length !== menus.order.length ) {\n\t\t\tfor ( i=0; i<menus.order.length; i+=1 ) {\n\t\t\t\titem = menus.order[i];\n\n\t\t\t\tif ( newOrder.indexOf( item ) === -1 ) {\n\t\t\t\t\tnewOrder.push( item );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmenus.order = newOrder;\n\n\t\tsetAllOrders();\n\n\t\treturn muSystem;\n\t}\n\n\tfunction menuIndex ( reference ) {\n\t\tif ( typeof reference === 'number' ) {\n\t\t\treturn reference;\n\t\t} else {\n\t\t\treturn menus.order.indexof( reference );\n\t\t}\n\t}\n\n\n\n\n\n\t/*\n\t *\tVisibility\n\t */\n\tfunction toggleVisibility ( menuID, to ) {\n\t\tif ( typeof to === 'boolean' ) {\n\t\t\tmenus.items[ menuID ].visible = to;\n\t\t} else {\n\t\t\tmenus.items[ menuID ].visible = !menus.items[ menuID ].visible;\n\t\t}\n\n\t\thandleLinks( menuID );\n\t\tsetAllOrders();\n\n\t\t$rootScope.$broadcast( 'MU_visibilityToggled', { menuID: menuID });\n\n\t\treturn muSystem;\n\t}\n\n\tfunction isVisible ( menuID ) {\n\t\treturn menus.items[ menuID ].visible;\n\t}\n\n\n\n\n\n\t/*\n\t *\tState manipulation\n\t */\n\tfunction toggleState ( menuID, to ) {\n\t\tvar thisMenu = menus.items[ menuID ];\n\n\t\tif ( typeof to === 'string' ) {\n\t\t\tthisMenu.state = to;\n\t\t} else {\n\t\t\tthisMenu.state = thisMenu.state === 'open' ?\n\t\t\t\t'closed' :\n\t\t\t\t'open';\n\t\t}\n\n\t\thandleLinks( menuID );\n\t\tsetAllOrders();\n\n\t\t$rootScope.$broadcast( 'MU_stateToggled', { menuID: menuID, newState: thisMenu.state} );\n\n\t\treturn muSystem;\n\t}\n\n\tfunction stateOf ( menuID ) {\n\t\treturn menus.items[ menuID ].state;\n\t}\n\n\tfunction isOfState ( menuID, state ) {\n\t\treturn stateOf( menuID ) === state;\n\t}\n\n\n\n\n\n\t/*\n\t *\tState Linking\n\t */\n\tfunction linkMenus ( which, how, options ) {\n\t\tvar o     = options || {},\n\t\t\tlinksMenus = typeof which === 'string' ?\n\t\t\t\twhich.split(' ') :\n\t\t\t\twhich;\n\n\t\tlinks.push({\n\t\t\tmenus: linksMenus,\n\t\t\thow:   how\n\t\t});\n\n\t\thandleLink ( how, linksMenus[0], linksMenus[1] );\n\n\t\treturn muSystem;\n\t}\n\n\tfunction unlinkMenus ( which, how ) {\n\t\tvar i     = 0,\n\t\t\tthisLink,\n\n\t\t\tlinkAIndex,\n\t\t\tlinkBIndex,\n\n\t\t\tmenuIDs;\n\n\n\t\tif ( !which ) {\n\t\t\tlinks = [];\n\t\t\treturn muSystem();\n\t\t} else if ( typeof which === 'string' ) {\n\t\t\tmenuIDs = which.split(' ');\n\t\t} else {\n\t\t\tmenuIDs = which;\n\t\t}\n\n\n\t\tfor (; i < links.length; i+=1 ) {\n\t\t\tthisLink = links[i];\n\t\t\tlinkAIndex = thisLink.menuIDs.indexOf( menuIDs[0] );\n\t\t\tlinkBIndex = thisLink.menuIDs.indexOf( menuIDs[1] );\n\n\t\t\tif (\tlinkAIndex !== -1 &&\n\t\t\t\t\tlinkBIndex !== -1 &&\n\t\t\t\t\tlinkAIndex !== linkBIndex &&\n\t\t\t\t\t!how || how === thisLink.how ) {\n\t\t\t\tlinks.splice( i, 1 );\n\t\t\t}\n\n\t\t}\n\n\t\treturn muSystem;\n\t}\n\n\tfunction handleLinks ( menuID ) {\n\t\tvar i = 0,\n\t\t\tthisLink,\n\t\t\tthisMenuLinkIndex,\n\t\t\totherMenuLinkIndex,\n\t\t\tothermenuID,\n\n\t\t\tthisMenu = menus.items[menuID],\n\t\t\totherMenu;\n\n\t\tfor (; i<links.length; i+=1) {\n\t\t\tthisLink           = links[i];\n\t\t\tthisMenuLinkIndex  = thisLink.menus.indexOf( menuID );\n\n\t\t\tif ( thisMenuLinkIndex > -1 ) {\n\t\t\t\totherMenuLinkIndex = 1-thisMenuLinkIndex;\n\t\t\t\tothermenuID      = thisLink.menus[ 1-thisMenuLinkIndex ];\n\n\t\t\t\thandleLink ( thisLink.how, menuID, othermenuID );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleLink ( how, A, B ) {\n\t\tswitch ( how ) {\n\t\t\tcase 'one open':\n\t\t\t\thandleLink_oneOpen( A, B );\n\t\t\t\tbreak;\n\n\t\t\tcase 'one closed':\n\t\t\t\thandleLink_oneClosed( A, B );\n\t\t\t\tbreak;\n\n\t\t\tcase 'one visible':\n\t\t\t\thandleLink_oneVisible( A, B );\n\t\t\t\tbreak;\n\n\t\t\tcase 'one hidden':\n\t\t\t\thandleLink_oneHidden( A, B );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tfunction handleLink_oneOpen ( A, B ) {\n\t\tvar thisMenu = menus.items[A],\n\t\t\totherMenu = menus.items[B];\n\n\t\tif ( thisMenu.state === 'open' ) {\n\t\t\ttoggleState( B, 'closed' );\n\t\t}\n\t}\n\tfunction handleLink_oneClosed ( A, B ) {\n\t\tvar thisMenu = menus.items[A],\n\t\t\totherMenu = menus.items[B];\n\n\t\tif ( thisMenu.state === 'closed' ) {\n\t\t\ttoggleState( B, 'open' );\n\t\t}\n\t}\n\tfunction handleLink_oneVisible ( A, B ) {\n\t\tvar thisMenu = menus.items[A],\n\t\t\totherMenu = menus.items[B];\n\n\t\tif ( thisMenu.visible ) {\n\t\t\ttoggleVisibility( B, false );\n\t\t}\n\t}\n\tfunction handleLink_oneHidden ( A, B ) {\n\t\tvar thisMenu = menus.items[A],\n\t\t\totherMenu = menus.items[B];\n\n\t\tif ( !thisMenu.visible ) {\n\t\t\ttoggleVisibility( B, true );\n\t\t}\n\t}\n\n\n\n\n\n\n\t/*\n\t *\tMenu system function\n\t *\tMay well stay empty, but allows it to be a function in future\n\t */\n\tfunction muSystem () {\n\t\treturn menus;\n\t}\n\n\tvar menus = {\n\t\t\titems: {},\n\t\t\torder: []\n\t\t},\n\t\tlinks = [];\n\n\n\n\n\n\n\n\n\n\n\tmuSystem.add = addMenu;\n\tmuSystem.link = linkMenus;\n\tmuSystem.unlink = unlinkMenus;\n\tmuSystem.reorder = reorderMenus;\n\n\tmuSystem.toggleState = toggleState;\n\tmuSystem.toggleVisibility = toggleVisibility;\n\n\tmuSystem.setOrder = setOrder;\n\n\tmuSystem.isVisible = isVisible;\n\tmuSystem.is = isOfState;\n\tmuSystem.state = stateOf;\n\tmuSystem.menus = menus.items;\n\tmuSystem.menusBase = menus;\n\n\treturn muSystem;\n}]);\n;//\tAny controller containing this service should have this line of code:\n//\t\t$scope.$on( 'MU_windowResized', function() { $scope.$apply(); });\n\nMU_System.factory('muContent', [ '$window', '$rootScope', '$timeout', 'muMenus',\n\tfunction( $window, $rootScope, $timeout, muMenus ) {\n\n\t/*\n\t *\tBox Sizes\n\t */\n\tfunction setSystemMetrics () {\n\t\tvar offsetLeft    = getSize('left'),\n\t\t\toffsetRight   = getSize('right'),\n\t\t\toffsetTop     = getSize('top'),\n\t\t\toffsetBottom  = getSize('bottom');\n\n\t\tif ( offsetLeft + offsetRight > muContent.containerWidth ) {\n\t\t\tif ( offsetLeft > muContent.containerWidth ) {\n\t\t\t\toffsetRight = 0;\n\t\t\t\toffsetLeft = muContent.containerWidth;\n\t\t\t} else {\n\t\t\t\toffsetRight = muContent.containerWidth - offsetLeft;\n\t\t\t}\n\t\t}\n\n\t\tsystemMetrics = {\n\t\t\ttop:     offsetTop,\n\t\t\tright:   offsetRight,\n\t\t\tbottom:  offsetBottom,\n\t\t\tleft:    offsetLeft,\n\t\t\torder:   0\n\t\t};\n\t}\n\n\tfunction getSize ( menuID ) {\n\t\tvar size;\n\n\t\tif ( menus.items[ menuID ] && menus.items[ menuID ].visible ) {\n\t\t\tsize = menus.items[ menuID ].styles[ menus.items[ menuID ].state ];\n\t\t} else {\n\t\t\tsize = 0;\n\t\t}\n\n\t\treturn size;\n\t}\n\n\tfunction getOpenSize ( menuID ) {\n\t\tvar size;\n\n\t\tsize = menus.items[ menuID ].styles.open;\n\n\t\treturn size;\n\t}\n\n\n\n\n\n\t/*\n\t *\tElement queries\n\t */\n\tfunction resizeHandler () {\n\t\tvar timeNow = +new Date(),\n\t\t\toldContainerClass;\n\n\t\tif ( timeNow - lastResize > 300 ){\n\t\t\toldContainerClass = muContent.mediaClass;\n\t\t\tfindContentSize();\n\n\t\t\tif ( delayBroadcastResize ) {\n\t\t\t\t$timeout.cancel(delayBroadcastResize);\n\t\t\t}\n\t\t\tdelayBroadcastResize = $timeout(function() {\n\t\t\t\tresizeHandler();\n\t\t\t\t$rootScope.$broadcast( 'MU_windowResized' );\n\t\t\t\tdelayBroadcastResize = false;\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tfunction findContentSize () {\n\t\tvar MUContiner = document.getElementById('MU').parentNode,\n\t\t\tcontainerWidth =\n\t\t\t\tMUContiner.getBoundingClientRect().right -\n\t\t\t\tMUContiner.getBoundingClientRect().left,\n\t\t\tcontainerHeight =\n\t\t\t\tMUContiner.getBoundingClientRect().bottom -\n\t\t\t\tMUContiner.getBoundingClientRect().top,\n\t\t\tcontentWidth =\n\t\t\t\tcontainerWidth -\n\t\t\t\tgetSize( 'left' ) -\n\t\t\t\tgetSize( 'right' ),\n\t\t\tcontentHeight =\n\t\t\t\tcontainerHeight -\n\t\t\t\tgetSize( 'top' ) -\n\t\t\t\tgetSize( 'bottom' );\n\n\t\tmuContent.containerWidth = containerWidth;\n\t\tmuContent.contentWidth = contentWidth;\n\n\t\tmuContent.containerHeight = containerHeight;\n\t\tmuContent.contentHeight = contentHeight;\n\n\t\tsetContextQueryString();\n\n\t\treturn contentWidth;\n\t}\n\n\tfunction addQuery ( type ) {\n\t\tvar i = 1, j,\n\t\t\targs = arguments, arg,\n\t\t\tqueries, query;\n\n\t\tfor (; i<args.length; i+=1 ) {\n\t\t\targ = args[i];\n\n\t\t\tswitch ( typeof arg ) {\n\t\t\t\tcase 'string':\n\t\t\t\tcase 'number':\n\t\t\t\t\tqueries = ( '' + arg ).split( ' ' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tqueries = arg;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfor ( j=0; j<queries.length; j+=1 ) {\n\t\t\t\tcontextQueries[ type ].push( +queries[j] );\n\t\t\t}\n\t\t}\n\n\t\tcontextQueries[ type ].sort(sortNumber);\n\t\tsetContextQueryString();\n\n\t\t$rootScope.$broadcast( 'MU_windowResized' );\n\n\t\treturn muContent;\n\t}\n\n\tfunction setContextQueryString () {\n\t\tvar greaterThan = '',\n\t\t\ti = 0, query;\n\n\t\tfor (; i < contextQueries.w.length; i+=1 ) {\n\t\t\tquery = contextQueries.w[i];\n\n\t\t\tif ( query <= muContent.contentWidth ) {\n\t\t\t\tgreaterThan += ' media__min-width__' + query;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tmuContent.mediaClass = greaterThan;\n\t}\n\n\n\n\t/*\n\t *\tArray sorying numerically\n\t */\n\tfunction sortNumber ( a, b ) {\n\t\treturn a - b;\n\t}\n\n\tfunction muContent () {}\n\n\tvar systemMetrics = {},\n\t\tmenus = muMenus.menusBase,\n\t\tcontextQueries = {\n\t\t\tw: [],\n\t\t\th: []\n\t\t},\n\t\tdelayBroadcastResize = false,\n\t\tlastResize = +new Date();\n\n\n\n\tangular.element($window).bind('resize', resizeHandler );\n\t$rootScope.$on( 'MU_menuAdded', function() {\n\t\tfindContentSize();\n\t});\n\t$rootScope.$on( 'MU_visibilityToggled', function() {\n\t\tsetSystemMetrics();\n\t\tfindContentSize();\n\t});\n\t$rootScope.$on( 'MU_stateToggled', function() {\n\t\tsetSystemMetrics();\n\t\tfindContentSize();\n\t});\n\n\n\n\n\n\tfindContentSize();\n\tmuContent.addQuery = addQuery;\n\tmuContent.metrics = function () {\n\t\treturn systemMetrics;\n\t};\n\tmuContent.mediaClass = '';\n\n\n\n\n\n\treturn muContent;\n\n}]);","var myApp = angular.module('myApp', ['MU']);\n;myApp.controller('GameGridController', [ 'muMenus', '$scope', \"$interval\",\nfunction( muMenus, $scope, $interval ){\n\n\tvar self = this,\n\t\ti = 0;\n\n\tthis.games = [];\n\n\tfor (; i<20; i+=1) {\n\t\tthis.games.push({\n\t\t\tid: i,\n\t\t\tbg: 'rgb(' +\n\t\t\t\t(110 + Math.floor(Math.random()*30)) + ',' +\n\t\t\t\t(110 + Math.floor(Math.random()*30)) + ',' +\n\t\t\t\t(110 + Math.floor(Math.random()*30)) +\n\t\t\t')'\n\t\t});\n\t}\n\n\n}]);\n;myApp.controller('HeroController', [ 'muContent',\nfunction( muContent ){\n\n\tvar self = this;\n\n\tfunction getHeroHeight () {\n\t\tvar height = muContent.contentHeight * 0.5;\n\n\t\treturn {\n\t\t\theight: muContent.metrics + 'px'\n\t\t};\n\t}\n\n\tthis.contentHeight = getHeroHeight;\n\n\tthis.title = 'Hero Title';\n\n\n}]);\n;myApp.controller('MUMenuLeftController', [ 'muMenus', '$scope',\nfunction( muMenus, $scope ){\n\n\tvar self = this;\n\n\tthis.items = [0,1];\n\tthis.openItem = -1;\n\n\tthis.toggle = function ( $index ) {\n\t\tif ( self.openItem === $index ) {\n\t\t\tself.openItem = -1;\n\t\t\tmuMenus.toggleState( 'left', 'closed' );\n\t\t} else {\n\t\t\tself.openItem = $index;\n\t\t\tmuMenus.toggleState( 'left', 'open' );\n\t\t}\n\t};\n\n\t$scope.$on('MU_stateToggled', function( event, args ){\n\t\tif ( args.menuID === 'left' && args.newState === 'closed' ) {\n\t\t\tself.openItem = -1;\n\t\t}\n\t});\n\n\n\n}]);\n;myApp.controller('MUMenuRightController', [ 'muMenus', '$scope',\nfunction( muMenus, $scope ){\n\n\tvar self = this;\n\n\tthis.items = [0,1,2,3,4];\n\tthis.openItem = -1;\n\n\tthis.toggle = function ( $index ) {\n\t\tif ( self.openItem === $index ) {\n\t\t\tself.openItem = -1;\n\t\t\tmuMenus.toggleState( 'right', 'closed' );\n\t\t} else {\n\t\t\tself.openItem = $index;\n\t\t\tmuMenus.toggleState( 'right', 'open' );\n\t\t}\n\t};\n\n\t$scope.$on('MU_stateToggled', function( event, args ){\n\t\tif ( args.menuID === 'right' && args.newState === 'closed' ) {\n\t\t\tself.openItem = -1;\n\t\t}\n\t});\n\n\n\n}]);\n;myApp.controller('MUSystemController', [ 'muMenus', 'muContent', '$scope', \"$interval\",\nfunction( muMenus, muContent, $scope, $interval ){\n\n\tvar self = this;\n\n\tfunction capitalise ( string ) {\n\t\treturn string.substr(0,1).toUpperCase() + string.substr(1);\n\t}\n\n\tthis.getClassName = function () {\n\t\tvar className = \"\",\n\t\t\ti, j, menu, menu2;\n\n\t\tfor ( i in muMenus.menus ) {\n\t\t\tmenu = muMenus.menus[i];\n\n\t\t\tclassName += ' MU-' + i + '--' +\n\t\t\t\t(menu.visible ?\n\t\t\t\t\tmenu.state :\n\t\t\t\t\t'hidden');\n\n\t\t\tclassName += ' MU-' + i + \"Order\" + menu.order;\n\n\t\t\tfor ( j in muMenus.menus ) {\n\t\t\t\tif (j !== i) {\n\t\t\t\t\tmenu2 = muMenus.menus[j];\n\n\t\t\t\t\tif ( menu.order > menu2.order ) {\n\t\t\t\t\t\tclassName += ' MU-' + i + \"Above\" + capitalise( j );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclassName += ' MU-' + i + \"Below\" + capitalise( j );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn className;\n\t};\n\n\n\n\t//\tCreating flexible link and unlink functions\n\tthis.linkMenus = function (which) {\n\t\tmuMenus.link( which, prompt() );\n\t};\n\n\tthis.unlinkMenus = function (which) {\n\t\tmuMenus.unlink( which, prompt() );\n\t};\n\n\n\n\t//\tAdding menus\n\tmuMenus\n\t\t.add('top', {\n\t\t\tsizeOpen: 80,\n\t\t\tsizeClosed: 50\n\t\t})\n\t\t.add('bottom', {\n\t\t\t//visible: false,\n\t\t\tstate: 'open',\n\n\t\t\tsizeOpen: 60,\n\t\t\tsizeClosed: 50\n\t\t})\n\t\t.add('right', {\n\t\t\tstate: 'closed',\n\t\t\tsizeOpen: 260,\n\t\t\tsizeClosed: 50\n\t\t})\n\t\t.add('left', {\n\t\t\tstate: 'closed',\n\t\t\tsizeOpen: 260,\n\t\t\tsizeClosed: 50\n\t\t})\n\t\t.link( 'left right', 'one open' );\n\n\tmuContent.addQuery( 'w', '100 200 300 400 500 600 700 800 900 1000 1100 1200 1300 1400 1500 1600 1700' );\n\n\n\n\t//\tSetting menus to be in HTML\n\tthis.menus = muMenus;\n\tthis.content = muContent;\n\n\tthis.leftIcons = '0 1 2 3 4'.split(' ');\n\tthis.rightIcons = '0 1 2 3'.split(' ');\n\n\tthis.leftOpen = -1;\n\tthis.rightOpen = -1;\n\n\tthis.selectLeft = function ( $index ) {\n\t\tif (self.leftOpen !== $index) {\n\t\t\tself.leftOpen = $index;\n\t\t} else {\n\t\t\tself.leftOpen = -1;\n\t\t}\n\t};\n\tthis.selectRight = function ( $index ) {\n\t\tif (self.rightOpen !== $index) {\n\t\t\tself.rightOpen = $index;\n\t\t} else {\n\t\t\tself.rightOpen = -1;\n\t\t}\n\t};\n\n\n\n\t$scope.$on( 'MU_windowResized', function() {\n\t\t$scope.$apply();\n\t});\n\n}]);"]}